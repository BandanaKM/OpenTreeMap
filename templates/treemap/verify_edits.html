{% extends "base.html" %}
{% block extrahead %}
    <script src="/static/tablesorter/jquery.tablesorter.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/static/tablesorter/style.css" media="screen" />

    <script type="text/javascript">
    $(document).ready(function() {
        jQuery("#species_list_table").tablesorter({sortList: [[3,1]]})
        });

    </script>
{% endblock %}

{% block content %}

<div class="content">
	{% if page %}
		You are looking at changes {{page.start_index}} through {{page.end_index}} <br>
		{% if page.has_previous %}<a href="./?page={{page.previous_page_number}}">previous</a>{% endif %}
		{% if page.has_next %}<a href="./?page={{page.next_page_number}}">next</a>{% endif %}
	{% endif %}

	<div id="species_list">
		<table id="species_list_table">
			<thead>
				<tr>
					<th>Tree</th>
					<th>Address</th>
					<th>Updated By</th>
					<th>Date</th>
					<th>Change</th>
					<th>Rep</th>
				</tr>
			</thead>
			<tbody>
				{% for c in changes %}
				<tr >
					<td><i>{{c.species}}</i><br><a href="/trees/{{c.id}}" target="_blank">View Record</a></td>
					<td>{{c.address_street}}</td>
					<td><a href="/profiles/{{c.last_updated_by.username}}" target="_blank">{{c.last_updated_by}}</a></td>
					<td>{{c.last_updated|date:'DATETIME_FORMAT'}}</td>
					{% if c.change_description.key %}
						<td><b>{{c.change_description.key}}</b> - {{c.change_description.value}}<br>
						{% if c.change_description.old_value %}
							Old Value: {{c.change_description.old_value}}
						{% endif %}
						</td>
					{% else %}
						{% if c.change_description.items %}
							<td>
							{% for key, value in c.change_description.items %}
								<b>{{key}}:</b> {{value}}<br>
							{% endfor %}
							</td>
						{% else %}
							<td>{{c.change_description}}</td>
						{% endif %}
					{% endif %}
					<td> <a href="/verify/{{c.type}}/{{c.change_id}}/up">U</a>
						 <a href="/verify/{{c.type}}/{{c.change_id}}/neutral">N</a>
						 <a href="/verify/{{c.type}}/{{c.change_id}}/down">D</a> </td>
				</tr>
				{% endfor %}
			<tbody>
		</table>
	</div>

</div>


{% endblock %}

