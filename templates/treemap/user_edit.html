{% extends "base.html" %}
{% block extrahead %}
    <script src="/static/tablesorter/jquery.tablesorter.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/static/tablesorter/style.css" media="screen" />

    <script type="text/javascript">
    $(document).ready(function() {
        jQuery("#user_list_table").tablesorter({sortList: [[0,0]], headers: {2:{sorter:'usLongDate'}}})
        });

    </script>
{% endblock %}

{% block content %}

<div class="content">
	<div id="user_list">
		<table id="user_list_table">
			<thead>
				<tr>
					<th>Username</th>
					<th>User</th>
					<th>Last Login</th>
					<th>Status</th>
					<th>Group</th>
					<th>Reputation</th>
				</tr>
			</thead>
			<tbody>
				{% for u in users %}
					<tr id="{{u.id}}">
						<td><a href="/profile/{{u.username}}">{{u.username}}</a></td>
						<td>{{u.get_full_name}} <br/>{{u.email}}</td>
						<td>{{u.last_login|date:"M d, Y"}}</td>
						<td id="active">{{u.is_active|yesno:"Active,Inactive"}}</td>
						<td>
							<select style="width:100%;" onChange="tm.updateGroup_Admin({{u.id}}, this.value);return false;">
								<option>Public</option>
							{% for g in groups.all %}
								<option {%if g in u.groups.all%}selected='true'{%endif%} value='{{g.id}}'>{{g.name}}</option>
							{% endfor %}
							</select>
						</td>
						<td id="rep">
							<input id='reputation_{{u.id}}' value='{{u.reputation.reputation}}' size=6 onChange="tm.updateReputation_Admin({{u.id}}, this.value);return false;">
							{% if u.is_active %}
								<a id="ban" href="javascript:void(0);" onclick="tm.banUser({{u.id}});return false;">Ban?</a>
								<a id="activate" href="javascript:void(0);" style="display:none;" onclick="tm.activateUser({{u.id}});return false;">Activate?</a>
							{% else %}
								<a id="ban" href="javascript:void(0);" onclick="tm.banUser({{u.id}});return false;">Ban?</a>
								<a id="activate" href="javascript:void(0);" style="display:none;" onclick="tm.activateUser({{u.id}});return false;">Activate?</a>
							{% endif %}
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

</div>


{% endblock %}

