{% extends "base.html" %}
{% block extrahead %}
    <script src="/static/tablesorter/jquery.tablesorter.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/static/tablesorter/style.css" media="screen" />

    <script type="text/javascript">
    $(document).ready(function() {
        jQuery("#comment_list_table").tablesorter({sortList: [[1,1]]})
        });

    </script>
{% endblock %}

{% block content %}

<div class="content">
	<h2>All Comments</h2>
	{% if page %}
		You are looking at flags {{page.start_index}} through {{page.end_index}} <br>
		{% if page.has_previous %}<a href="./?page={{page.previous_page_number}}">previous</a>{% endif %}
		{% if page.has_next %}<a href="./?page={{page.next_page_number}}">next</a>{% endif %}
	{% endif %}
	<div><a href="/comments/moderate/">View flagged comments</a></div>
	<div id="comment_list">
		<table id="comment_list_table">
			<thead>
				<tr>
					<th>Added By</th>
					<th>Date</th>
					<th>Comment</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for c in comments %}
				<tr id="{{c.id}}">
					<td><a href="/profile/{{c.user.username}}" target="_blank">{{c.user.username}}</a></td>
					<td>{{c.submit_date|date:'DATETIME_FORMAT'}}</td>
					<td>
						<a href="/trees/{{c.content_object.id}}" target="_blank">Tree #{{c.content_object.id}}</a> -
						<br>{{c.comment}}</td>
					<td>
						<a href="#" onclick="tm.hideComment({{c.id}}); return false;">Hide Comment</a>
				 	</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>

{% endblock %}

